@use "sass:map";
@use "../variables" as *;
@use "breakpoints" as *;

@mixin space($property, $size, $side: all) {
	$value: map.get($spacing, $size);

	@if $side == all {
		#{$property}: $value;
	} @else if $side == top or $side == t {
		#{$property}-top: $value;
	} @else if $side == right or $side == r {
		#{$property}-right: $value;
	} @else if $side == bottom or $side == b {
		#{$property}-bottom: $value;
	} @else if $side == left or $side == l {
		#{$property}-left: $value;
	} @else if $side == x or $side == horizontal {
		#{$property}-left: $value;
		#{$property}-right: $value;
	} @else if $side == y or $side == vertical {
		#{$property}-top: $value;
		#{$property}-bottom: $value;
	}

	@if $size == lg or $size == xl or $size == 2xl {
		@include tablet {
			$multiplier: if($size == lg, 0.9, if($size == xl, 0.85, 0.8));

			@if $side == all {
				#{$property}: $value * $multiplier;
			} @else if $side == top or $side == t {
				#{$property}-top: $value * $multiplier;
			} @else if $side == right or $side == r {
				#{$property}-right: $value * $multiplier;
			} @else if $side == bottom or $side == b {
				#{$property}-bottom: $value * $multiplier;
			} @else if $side == left or $side == l {
				#{$property}-left: $value * $multiplier;
			} @else if $side == x or $side == horizontal {
				#{$property}-left: $value * $multiplier;
				#{$property}-right: $value * $multiplier;
			} @else if $side == y or $side == vertical {
				#{$property}-top: $value * $multiplier;
				#{$property}-bottom: $value * $multiplier;
			}
		}
	}

	@include mobile {
		$multiplier: if(
			$size == xs,
			0.75,
			if($size == sm, 0.8, if($size == md, 0.75, if($size == lg, 0.4, if($size == xl, 0.3, 0.25))))
		);

		@if $side == all {
			#{$property}: $value * $multiplier;
		} @else if $side == top or $side == t {
			#{$property}-top: $value * $multiplier;
		} @else if $side == right or $side == r {
			#{$property}-right: $value * $multiplier;
		} @else if $side == bottom or $side == b {
			#{$property}-bottom: $value * $multiplier;
		} @else if $side == left or $side == l {
			#{$property}-left: $value * $multiplier;
		} @else if $side == x or $side == horizontal {
			#{$property}-left: $value * $multiplier;
			#{$property}-right: $value * $multiplier;
		} @else if $side == y or $side == vertical {
			#{$property}-top: $value * $multiplier;
			#{$property}-bottom: $value * $multiplier;
		}
	}
}

@mixin m($size, $side: all) {
	@include space(margin, $size, $side);
}

@mixin p($size, $side: all) {
	@include space(padding, $size, $side);
}

@mixin g($size) {
	@include space(gap, $size, all);
}

// Примеры использования:
// @include m(lg, bottom);     // margin-bottom: lg с адаптивностью
// @include p(md, x);          // padding-left и padding-right: md с адаптивностью
// @include m(sm, all);        // margin: sm с адаптивностью
// @include p(xl, y);          // padding-top и padding-bottom: xl с адаптивностью
// @include g(lg);             // gap: lg с адаптивностью
// @include space(margin, lg, right); // margin-right: lg с адаптивностью
